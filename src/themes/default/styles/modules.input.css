/*------------------------------------*\
    # modules.input
\*------------------------------------*/

.input {
    /**
     * Input base
     */
    display: inline-block;
    width: 100%;

    border-radius: $global-radial;
    vertical-align: middle;
    
    background-color: $white;
    
    touch-action: manipulation;
    -webkit-appearance: none;
    appearance: none;
    
    box-sizing: border-box;
    transition: all 250ms;

    /**
     * Input sizes
    */
    &--sml {
        height: calc($unit * 5);
        line-height: calc($unit * 5);
        padding: 0 calc($unit * 1.5);
    }

    &--med {
        height: calc($unit * 6);
        line-height: calc($unit * 6);
        padding: 0 calc($unit * 2);
    }

    &--lrg {
        height: calc($unit * 8);
        line-height: calc($unit * 8);
        padding: 0 calc($unit * 3);
    }

    /**
     * Input base project styling
     */
    font-family: $ff-sans;
    border: 1px solid $grey-3;

    &::placeholder {
        color: color(white blackness(+60%));
    }

    &::-webkit-inner-spin-button,
    &::-webkit-outer-spin-button {
        -webkit-appearance: none;
        margin: 0;
    }

    &:invalid {
        border: 1px solid $color-warning;
    }

    &:focus {
        outline: 0;
        border: 1px solid $grey-3;
        box-shadow: 0 0 5px 0px $color-tertiary;
        animation: shadow 1s alternate infinite;
        
        &::placeholder {
            color: color(white blackness(+60%));
        }
    }

    &:-moz-focusring {
        color: transparent;
        text-shadow: 0 0 0 $black;
    }

    /**
     * Input types
     */
    &--text {
        width: 100%;
        padding: calc($unit * 1.5);
        @mixin type-scale $type-small, 1;
    }

    &--textarea {
        width: 100%;
        max-width: 100%;
        min-width: 100%;
        max-height: 200px;
        min-height: 72px;
        padding: calc($unit * 1.5);
        
        line-height: 1.2rem;
    }

    &--select, 
    &--date, 
    &--search {
        padding-right: calc($unit * 5);
        
        color: $color-text-dark;
        vertical-align: middle;

        &:focus {
            box-shadow: 0 0 5px 0px $color-tertiary;
            animation: shadow 1s alternate infinite;

            & + .input__icon {
                color: $color-tertiary;
            }
        }
        
        & + .input__icon {
            position: absolute;
            top: calc(50% - 9px);
            right: $unit;

            color: $grey-5;
            transition: all 250ms ease-in-out;

            &:hover,
            &:focus {
                color: $color-tertiary;
            }
        }
    }

    &--date {
        /* background-image: url(../img/ic_date_range_black_24px.svg); */
    }

    &--search {
        /* background-image: url(../img/ic_search_black_24px.svg); */

    }
    
    &--check {
        position: absolute;
        width: 0.1px;
        height: 0.1px;
        opacity: 0;

        & + .check {
            position: relative;
            width: 16px;
            height: 16px;
            
            display: inline-block;
            margin-left: 2px;
            border: 1px solid $grey-3;
            
            background-color: $white;
            cursor: pointer;
            vertical-align: sub;
            transition: all 250ms ease-in-out;

            /*draw check from borders*/
            &:before {
                content:"";
                position: absolute;
                top: 0px;
                left: 4px;
                width: 6px;
                height: 10px;
                
                display: block;
                border-right: 2px solid $color-tertiary;
                border-bottom: 2px solid $color-tertiary;
                
                opacity: 0;
                transform: rotate(45deg);
                transition: all 250ms ease-in-out;
            }
        }

        /*make all labels consistant*/
        & ~ .label {
            display: inline-block;
            margin-top: $unit;
            margin-bottom: $unit;
            
            @mixin type-scale $type-tiny, 1;
            font-weight: $type-weight-medium;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: $black;
            
            opacity: 0.7;
            cursor: pointer;

        }
        /*active state of checkbox*/
        &:checked {
            & + label.check {
                border: 1px solid $color-tertiary;
                background-color: $color-tertiary;
                vertical-align: sub;

                &:before {
                    opacity: 1;
                    border-color: $white;
                }
            }
        }

        /*focus state for checkbox*/
        &:focus {
            & + label.check {
                border: 1px solid $color-tertiary;
                vertical-align: sub;
            }
        }
    }

    /*treeway checkbox for 3 state (on, off, nonactive)*/
    &--treeway {
        position: relative;
        display: flex;
        margin-top: 10px;

        input {
            display: none;
        }

        input[type=radio] + label {
            width: calc($unit * 5);
            height: $spacer;

            font-size: 12px;
            line-height: 25px;
            
            cursor: pointer;
            text-align: center;
            background-color: $grey-2;
        }

        &__thumb {
            position: absolute;
            top: -1px;
            left: 29px;
            
            width: 32px;
            height: 26px;

            background-color: $grey-4;
            border-radius: $global-radial;
            transition: all 250ms ease-out;

            &::after {
                content: "\007C";
                width: 32px;
                height: 26px;
                
                display: inline-block;
                padding: 1px 0;
                
                font-family: icomoon;
                font-weight: bold;
                text-align: center;
                color: white;
            }

            &.on {
                left: -1px;
                background-color: $color-success;
                &::after {
                    content: "\e97c";
                    padding: 3px 0;
                }
            }

            &.off {
                left: 59px;
                background-color: $color-primary;
                &::after {
                    content: "\e95f";
                    padding: 3px 0;
                }
            }
        }

        &__label {
            &--first {
                border-top-left-radius: $global-radial;
                border-bottom-left-radius: $global-radial;
            }

            &--last {
                border-top-right-radius: $global-radial;
                border-bottom-right-radius: $global-radial;  
            }
        }
    }

    &--indeterminate {
        /*hide input checkbox*/
        input {
            position: absolute;
            
            display: inline-block;
            height: 0.1px;
            width: 0.1px;
        }

        /*checkbox = true*/
        input:checked + .input--indeterminate__label {
            background-color: #7ecf12;

            .thumb {
                left: calc(100% - 26px);
            }
        }
    
        /*checkbox = third state (indeterminate) */
        input:indeterminate + .input--indeterminate__label {
            background-color: #ddd;

            .thumb {
                left: 15px;
                &:after, 
                &:before {
                    color: #ddd;
                }
            }
        }
    
        &__label {
            position: relative;
            
            display: block;
            width: 55px;
            height: 26px;
            
            overflow: hidden;
            border-radius: $global-radial;
            
            background-color: #fd5353;
            cursor: pointer;
            transition: all 300ms ease-in-out;
        
            .thumb {
                position: absolute;
                left: 0;
                width: $spacer;
                height: $spacer;
                
                border-radius: $global-radial;
                border: 1px solid $grey-3;
                
                background-color: $white;
                transition: all 300ms ease-in-out;

                &:after {
                    content: "ON";
                    position: absolute;
                    top: $unit;
                    left: -24px;
                    
                    font-size: 12px;
                    color: white;
                }

                &:before {
                    content: "OFF";
                    position: absolute;
                    top: $unit;
                    left: 28px;
                    
                    font-size: 12px;
                    color: white;
                }
            }
        }
    } 
    
    &--radio {
        opacity: 0;
        position: absolute;

        & + label {
            cursor: pointer;

            &:before {
                content: '';
                width: calc($unit * 3);
                height: calc($unit * 3);
                margin-top: calc($unit / 2);
                margin-right: calc($unit * 2);
                float: left;
                
                padding: $unit;
                border: 1px solid color(white blackness(+30%));
            }
        }

        &:checked {
            & + label {
                &:before {
                    background-repeat: no-repeat;
                    background-position: center center;
                }
            }
        }

        &:focus {
            & + label {
                &:before {
                    box-shadow: 0 0 10px rgba(0,0,0,0.4);
                }
            }
        }
    }

    &--warning {
        border-color: $color-warning;

        &::placeholder {
            color: $color-warning;
            opacity: 0.5;
        }
    }

    &--disabled {
        opacity: 0.6;
        cursor: not-allowed !important;
    }
}
